targets=(
  "centos"
  "ubuntu"
)
pkgname="carbonio-mbox-war"
pkgver="1.0.0"
pkgrel="1"
arch="amd64"
maintainer="Zextras <packages@zextras.com>"
url="https://zextras.com"
depends=(
  "carbonio-store-components"
)
section="mail"
priority="optional"
pkgdesc="Carbonio Mailbox Service War"
pkgdesclong=(
  "Carbonio Mailbox Service War"
)

package() {
  cd "${srcdir}"/../../
  install -D opt/zextras/jetty_base/etc/service.web.xml.in \
    "${pkgdir}/opt/zextras/jetty_base/etc/service.web.xml.in"

  install -Ddm755 "${pkgdir}/opt/zextras/jetty_base/webapps/service"
  rsync -a \
    --exclude='zimlettaglib.jar' \
    --exclude='zm-taglib-*.jar' \
    --exclude='zimbra.tld' \
    --exclude='antisamy-1.5.8z.jar' \
    opt/zextras/jetty_base/webapps/service/ \
    "${pkgdir}/opt/zextras/jetty_base/webapps/service"
}
